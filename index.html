<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta Psiqui√°trica - Anamnese e Exame F√≠sico</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f4f8;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #1e3c5c;
            margin-bottom: 25px;
            font-size: 2.2em;
            border-bottom: 4px solid #3498db;
            padding-bottom: 10px;
        }

        h2 {
            color: #2c5282;
            margin: 25px 0 15px 0;
            font-size: 1.5em;
            background: #e8f0fe;
            padding: 10px;
            border-radius: 8px;
        }

        h3 {
            color: #2d3748;
            margin: 15px 0 10px 0;
            font-size: 1.2em;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid #3498db;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2d3748;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.1);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 200px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .btn-info {
            background: #f39c12;
        }

        .btn-info:hover {
            background: #e67e22;
        }

        .result-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e2e8f0;
        }

        .hda-display {
            background: #edf7ed;
            padding: 20px;
            border-radius: 8px;
            border-left: 6px solid #27ae60;
            margin: 20px 0;
            font-size: 16px;
            line-height: 1.6;
        }

        .conduta-display {
            background: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            border-left: 6px solid #f39c12;
            margin: 20px 0;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .imc-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
        }

        .imc-valor {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .imc-classificacao {
            font-size: 18px;
            padding: 8px;
            border-radius: 20px;
            display: inline-block;
            min-width: 200px;
        }

        .imc-normal { background: #c8e6c9; color: #1b5e20; }
        .imc-sobrepeso { background: #fff9c4; color: #ff6f00; }
        .imc-obesidade1 { background: #ffcc80; color: #e65100; }
        .imc-obesidade2 { background: #ffb74d; color: #bf360c; }
        .imc-obesidade3 { background: #ff8a65; color: #871400; }
        .imc-abaixo { background: #b3e5fc; color: #01579b; }

        .medicamento-item {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            position: relative;
        }

        .btn-remover {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .btn-remover:hover {
            background: #c0392b;
        }

        .sugestoes-perguntas {
            background: #ebf5ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .sugestao-item {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .sugestao-item:before {
            content: "‚Ä¢";
            color: #3498db;
            font-weight: bold;
            position: absolute;
            left: 5px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìã Consulta Psiqui√°trica - Anamnese e Exame F√≠sico</h1>
        <p style="margin-bottom: 20px; color: #4a5568;">Baseado no DSM-5-TR e diretrizes da ABP</p>

        <!-- Identifica√ß√£o - APENAS campos solicitados -->
        <div class="card">
            <h2>1. Identifica√ß√£o do Paciente</h2>
            <div class="grid-4">
                <div class="form-group">
                    <label>Idade (anos)</label>
                    <input type="number" id="idade" min="0" max="120" oninput="calcularIMC()">
                </div>
                <div class="form-group">
                    <label>Sexo</label>
                    <select id="sexo">
                        <option value="">Selecione</option>
                        <option value="Feminino">Feminino</option>
                        <option value="Masculino">Masculino</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Peso (kg)</label>
                    <input type="number" id="peso" step="0.1" oninput="calcularIMC()">
                </div>
                <div class="form-group">
                    <label>Altura (m)</label>
                    <input type="number" id="altura" step="0.01" oninput="calcularIMC()">
                </div>
            </div>
            
            <!-- IMC com classifica√ß√£o abaixo do valor -->
            <div id="imcContainer" class="imc-container" style="display: none;">
                <div id="imcValor" class="imc-valor"></div>
                <div id="imcClassificacao" class="imc-classificacao"></div>
            </div>
        </div>

        <!-- Queixa Principal -->
        <div class="card">
            <h2>2. Queixa Principal</h2>
            <div class="form-group">
                <label>"O que mais incomoda o(a) senhor(a)?"</label>
                <textarea id="queixa" placeholder="Ex: Tristeza profunda, ins√¥nia, medos..."></textarea>
            </div>
        </div>

        <!-- Hist√≥ria Pr√©via com perguntas sugestivas -->
        <div class="card">
            <h2>3. Hist√≥ria Pr√©via</h2>
            
            <!-- Sugest√µes de perguntas para psiquiatria -->
            <div class="sugestoes-perguntas">
                <h3 style="margin-top: 0; color: #2980b9;">üí° Perguntas sugeridas para anamnese psiqui√°trica:</h3>
                <div class="grid-2">
                    <div>
                        <div class="sugestao-item">J√° teve epis√≥dios semelhantes antes?</div>
                        <div class="sugestao-item">J√° fez acompanhamento psiqui√°trico ou psicol√≥gico?</div>
                        <div class="sugestao-item">J√° usou medicamentos psiqui√°tricos? Quais?</div>
                        <div class="sugestao-item">J√° teve idea√ß√£o suicida ou tentativas?</div>
                        <div class="sugestao-item">Hist√≥rico de interna√ß√µes psiqui√°tricas?</div>
                        <div class="sugestao-item">Uso de √°lcool, tabaco ou outras drogas?</div>
                    </div>
                    <div>
                        <div class="sugestao-item">Algu√©m na fam√≠lia tem transtorno psiqui√°trico?</div>
                        <div class="sugestao-item">Hist√≥rico familiar de suic√≠dio?</div>
                        <div class="sugestao-item">Doen√ßas cl√≠nicas (DM, HAS, epilepsia, tireoide)?</div>
                        <div class="sugestao-item">Traumas na inf√¢ncia ou adolesc√™ncia?</div>
                        <div class="sugestao-item">Como √© o suporte familiar?</div>
                        <div class="sugestao-item">Trabalha / estuda? Como est√° o desempenho?</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Antecedentes Pessoais</h3>
                    <div class="checkbox-group" id="antecedentesPessoais">
                        <div class="checkbox-item"><input type="checkbox" value="Depress√£o"> Depress√£o</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno Bipolar"> Transtorno Bipolar</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ansiedade"> Transtorno de Ansiedade</div>
                        <div class="checkbox-item"><input type="checkbox" value="TOC"> TOC</div>
                        <div class="checkbox-item"><input type="checkbox" value="TAG"> TAG</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno de P√¢nico"> Transtorno de P√¢nico</div>
                        <div class="checkbox-item"><input type="checkbox" value="Estresse P√≥s-Traum√°tico"> Estresse P√≥s-Traum√°tico</div>
                        <div class="checkbox-item"><input type="checkbox" value="Esquizofrenia"> Esquizofrenia</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno Esquizoafetivo"> Transtorno Esquizoafetivo</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno Alimentar"> Transtorno Alimentar</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno de Personalidade"> Transtorno de Personalidade</div>
                        <div class="checkbox-item"><input type="checkbox" value="TDAH"> TDAH</div>
                        <div class="checkbox-item"><input type="checkbox" value="Tentativa de suic√≠dio"> Tentativa de suic√≠dio</div>
                        <div class="checkbox-item"><input type="checkbox" value="Interna√ß√£o psiqui√°trica"> Interna√ß√£o psiqui√°trica</div>
                    </div>
                </div>
                
                <div>
                    <h3>Antecedentes Familiares</h3>
                    <div class="checkbox-group" id="antecedentesFamiliares">
                        <div class="checkbox-item"><input type="checkbox" value="Depress√£o familiar"> Depress√£o</div>
                        <div class="checkbox-item"><input type="checkbox" value="Transtorno Bipolar familiar"> Transtorno Bipolar</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ansiedade familiar"> Ansiedade</div>
                        <div class="checkbox-item"><input type="checkbox" value="Esquizofrenia familiar"> Esquizofrenia</div>
                        <div class="checkbox-item"><input type="checkbox" value="TOC familiar"> TOC</div>
                        <div class="checkbox-item"><input type="checkbox" value="TAG familiar"> TAG</div>
                        <div class="checkbox-item"><input type="checkbox" value="Suic√≠dio familiar"> Suic√≠dio</div>
                        <div class="checkbox-item"><input type="checkbox" value="Alcoolismo familiar"> Alcoolismo</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Alergias</label>
                <input type="text" id="alergias" placeholder="Medicamentosas, alimentares...">
            </div>
        </div>

        <!-- Medicamentos -->
        <div class="card">
            <h2>4. Medicamentos em Uso</h2>
            <div id="medicamentos-container">
                <!-- Os medicamentos ser√£o adicionados aqui dinamicamente -->
            </div>
            <button class="btn" onclick="adicionarMedicamento()">+ Adicionar Medicamento</button>
        </div>

        <!-- Hist√≥ria da Doen√ßa Atual -->
        <div class="card">
            <h2>5. Hist√≥ria da Doen√ßa Atual (HDA)</h2>
            <div class="grid-3">
                <div class="form-group">
                    <label>In√≠cio dos sintomas</label>
                    <input type="text" id="inicio" placeholder="Ex: 3 meses, desde janeiro...">
                </div>
                <div class="form-group">
                    <label>In√≠cio foi s√∫bito ou gradual?</label>
                    <input type="text" id="tipoInicio" placeholder="Ex: s√∫bito, gradual...">
                </div>
                <div class="form-group">
                    <label>Fatores desencadeantes</label>
                    <input type="text" id="fatoresDesencadeantes" placeholder="Ex: estresse, perda, trauma...">
                </div>
            </div>

            <h3>Sintomas Associados</h3>
            <div class="checkbox-group" id="sintomas">
                <div class="checkbox-item"><input type="checkbox" value="Tristeza"> Tristeza</div>
                <div class="checkbox-item"><input type="checkbox" value="Anedonia"> Anedonia</div>
                <div class="checkbox-item"><input type="checkbox" value="Ansiedade"> Ansiedade</div>
                <div class="checkbox-item"><input type="checkbox" value="Ins√¥nia"> Ins√¥nia</div>
                <div class="checkbox-item"><input type="checkbox" value="Hipersonia"> Hipersonia</div>
                <div class="checkbox-item"><input type="checkbox" value="Fadiga"> Fadiga</div>
                <div class="checkbox-item"><input type="checkbox" value="Irritabilidade"> Irritabilidade</div>
                <div class="checkbox-item"><input type="checkbox" value="Apatia"> Apatia</div>
                <div class="checkbox-item"><input type="checkbox" value="Idea√ß√£o suicida"> Idea√ß√£o suicida</div>
                <div class="checkbox-item"><input type="checkbox" value="Alucina√ß√µes"> Alucina√ß√µes</div>
                <div class="checkbox-item"><input type="checkbox" value="Del√≠rios"> Del√≠rios</div>
                <div class="checkbox-item"><input type="checkbox" value="Agita√ß√£o"> Agita√ß√£o</div>
                <div class="checkbox-item"><input type="checkbox" value="Lentifica√ß√£o"> Lentifica√ß√£o</div>
                <div class="checkbox-item"><input type="checkbox" value="Compuls√µes"> Compuls√µes</div>
                <div class="checkbox-item"><input type="checkbox" value="Obsess√µes"> Obsess√µes</div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Fatores de Melhora</h3>
                    <div class="checkbox-group" id="melhora">
                        <div class="checkbox-item"><input type="checkbox" value="Medica√ß√£o"> Medica√ß√£o</div>
                        <div class="checkbox-item"><input type="checkbox" value="Terapia"> Terapia</div>
                        <div class="checkbox-item"><input type="checkbox" value="Atividade f√≠sica"> Atividade f√≠sica</div>
                        <div class="checkbox-item"><input type="checkbox" value="Lazer"> Lazer</div>
                        <div class="checkbox-item"><input type="checkbox" value="Conv√≠vio social"> Conv√≠vio social</div>
                        <div class="checkbox-item"><input type="checkbox" value="Rotina estruturada"> Rotina estruturada</div>
                    </div>
                </div>
                
                <div>
                    <h3>Fatores de Piora</h3>
                    <div class="checkbox-group" id="piora">
                        <div class="checkbox-item"><input type="checkbox" value="Estresse"> Estresse</div>
                        <div class="checkbox-item"><input type="checkbox" value="Conflitos familiares"> Conflitos familiares</div>
                        <div class="checkbox-item"><input type="checkbox" value="Isolamento"> Isolamento</div>
                        <div class="checkbox-item"><input type="checkbox" value="Priva√ß√£o de sono"> Priva√ß√£o de sono</div>
                        <div class="checkbox-item"><input type="checkbox" value="Uso de subst√¢ncias"> Uso de subst√¢ncias</div>
                        <div class="checkbox-item"><input type="checkbox" value="√Ålcool"> √Ålcool</div>
                        <div class="checkbox-item"><input type="checkbox" value="Problemas financeiros"> Problemas financeiros</div>
                        <div class="checkbox-item"><input type="checkbox" value="Lembran√ßas traum√°ticas"> Lembran√ßas traum√°ticas</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Tratamentos pr√©vios realizados</label>
                <textarea id="tratamentosPrevios" placeholder="Medicamentos, psicoterapia, interna√ß√µes..."></textarea>
            </div>
        </div>

        <!-- Bot√£o Gerar HDA -->
        <div class="card">
            <button class="btn btn-success" onclick="gerarHDA()">ü§ñ Gerar HDA Autom√°tica</button>
            
            <div id="hdaGerada" class="hda-display" style="display:none;"></div>
        </div>

        <!-- Hip√≥teses e Conduta -->
        <div class="card">
            <h2>6. Hip√≥teses Diagn√≥sticas</h2>
            <div class="grid-2">
                <div class="form-group">
                    <label>Hip√≥tese Principal</label>
                    <input type="text" id="hipotesePrincipal" placeholder="Ex: Transtorno Depressivo Maior">
                </div>
                <div class="form-group">
                    <label>Diagn√≥stico Diferencial</label>
                    <input type="text" id="diagnosticoDiferencial" placeholder="Ex: Transtorno Bipolar, TAG">
                </div>
            </div>

            <h2>7. Conduta</h2>
            <button class="btn btn-info" onclick="gerarConduta()">‚öïÔ∏è Gerar Conduta</button>
            
            <div id="condutaGerada" class="conduta-display" style="display:none;"></div>

            <div class="form-group">
                <label>Exames Complementares</label>
                <div class="checkbox-group" id="exames">
                    <div class="checkbox-item"><input type="checkbox" value="Hemograma"> Hemograma</div>
                    <div class="checkbox-item"><input type="checkbox" value="Glicemia"> Glicemia</div>
                    <div class="checkbox-item"><input type="checkbox" value="Fun√ß√£o tireoidiana"> Fun√ß√£o tireoidiana</div>
                    <div class="checkbox-item"><input type="checkbox" value="Vitamina B12"> Vitamina B12</div>
                    <div class="checkbox-item"><input type="checkbox" value="F√≥lico"> √Åcido f√≥lico</div>
                    <div class="checkbox-item"><input type="checkbox" value="ECG"> ECG</div>
                    <div class="checkbox-item"><input type="checkbox" value="Sorologias"> Sorologias</div>
                </div>
            </div>
        </div>

        <!-- Bot√µes Finais -->
        <div style="display: flex; gap: 10px; margin: 30px 0; flex-wrap: wrap;">
            <button class="btn btn-success" onclick="gerarRelatorioCompleto()">üìã Gerar Relat√≥rio Completo</button>
            <button class="btn" onclick="copiarTexto()">üìã Copiar Relat√≥rio</button>
            <button class="btn" onclick="limparFormulario()">üîÑ Nova Consulta</button>
        </div>

        <!-- Relat√≥rio Completo -->
        <div class="result-box" id="relatorioCompleto" style="display:none;">
            <h3>üìÑ RELAT√ìRIO DA CONSULTA PSIQUI√ÅTRICA</h3>
            <div id="conteudoRelatorio" style="white-space: pre-wrap; line-height: 1.6;"></div>
        </div>
        
        <footer>
            Baseado no DSM-5-TR e diretrizes da Associa√ß√£o Brasileira de Psiquiatria
        </footer>
    </div>

    <script>
        // Fun√ß√µes IMC
        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value);
            const imcContainer = document.getElementById('imcContainer');
            const imcValor = document.getElementById('imcValor');
            const imcClassificacao = document.getElementById('imcClassificacao');
            
            if (peso && altura && peso > 0 && altura > 0) {
                const imc = peso / (altura * altura);
                const imcArredondado = imc.toFixed(2);
                const classificacao = classificarIMC(imc);
                const classeCSS = getIMCClass(imc);
                
                imcContainer.style.display = 'block';
                imcValor.innerHTML = `IMC: ${imcArredondado} kg/m¬≤`;
                imcClassificacao.innerHTML = classificacao;
                imcClassificacao.className = `imc-classificacao ${classeCSS}`;
            } else {
                imcContainer.style.display = 'none';
            }
        }

        function classificarIMC(imc) {
            if (imc < 18.5) return 'Abaixo do peso';
            if (imc < 25) return 'Peso normal';
            if (imc < 30) return 'Sobrepeso';
            if (imc < 35) return 'Obesidade grau I';
            if (imc < 40) return 'Obesidade grau II';
            return 'Obesidade grau III';
        }

        function getIMCClass(imc) {
            if (imc < 18.5) return 'imc-abaixo';
            if (imc < 25) return 'imc-normal';
            if (imc < 30) return 'imc-sobrepeso';
            if (imc < 35) return 'imc-obesidade1';
            if (imc < 40) return 'imc-obesidade2';
            return 'imc-obesidade3';
        }

        // Fun√ß√µes para Medicamentos
        let contadorMedicamentos = 1;

        function adicionarMedicamento() {
            const container = document.getElementById('medicamentos-container');
            const novoMed = document.createElement('div');
            novoMed.className = 'medicamento-item';
            novoMed.id = `med-${contadorMedicamentos}`;
            
            novoMed.innerHTML = `
                <button class="btn-remover" onclick="removerMedicamento('med-${contadorMedicamentos}')">‚úï Remover</button>
                <div class="grid-3">
                    <div class="form-group">
                        <label>Medicamento</label>
                        <input type="text" placeholder="Nome do medicamento">
                    </div>
                    <div class="form-group">
                        <label>Dose</label>
                        <input type="text" placeholder="Ex: 50mg/dia">
                    </div>
                    <div class="form-group">
                        <label>Tempo de uso</label>
                        <input type="text" placeholder="Ex: 3 meses">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label>Indica√ß√£o</label>
                        <input type="text" placeholder="Ex: Depress√£o, ansiedade...">
                    </div>
                    <div class="form-group">
                        <label>Resposta</label>
                        <input type="text" placeholder="Ex: boa, parcial, sem resposta">
                    </div>
                </div>
            `;
            
            container.appendChild(novoMed);
            contadorMedicamentos++;
        }

        function removerMedicamento(id) {
            const elemento = document.getElementById(id);
            if (elemento) {
                elemento.remove();
            }
        }

        // Fun√ß√£o para gerar HDA
        function gerarHDA() {
            const queixa = document.getElementById('queixa').value || 'sem queixa definida';
            const inicio = document.getElementById('inicio').value || 'n√£o especificado';
            const tipoInicio = document.getElementById('tipoInicio').value || '';
            const fatores = document.getElementById('fatoresDesencadeantes').value || '';
            
            const sintomas = Array.from(document.querySelectorAll('#sintomas input:checked')).map(cb => cb.value);
            const fatoresMelhora = Array.from(document.querySelectorAll('#melhora input:checked')).map(cb => cb.value);
            const fatoresPiora = Array.from(document.querySelectorAll('#piora input:checked')).map(cb => cb.value);
            
            let hda = `Paciente relata ${queixa}. `;
            hda += `In√≠cio ${tipoInicio} h√° aproximadamente ${inicio}. `;
            
            if (fatores) {
                hda += `Fatores desencadeantes: ${fatores}. `;
            }
            
            if (sintomas.length > 0) {
                hda += `Sintomas associados: ${sintomas.join(', ')}. `;
            }
            
            if (fatoresMelhora.length > 0) {
                hda += `Fatores de melhora: ${fatoresMelhora.join(', ')}. `;
            }
            
            if (fatoresPiora.length > 0) {
                hda += `Fatores de piora: ${fatoresPiora.join(', ')}. `;
            }
            
            const hdaDisplay = document.getElementById('hdaGerada');
            hdaDisplay.style.display = 'block';
            hdaDisplay.innerHTML = `<strong>HDA Gerada:</strong> ${hda}`;
        }

        // Fun√ß√£o para gerar Conduta
        function gerarConduta() {
            const hipotese = document.getElementById('hipotesePrincipal').value || 'a ser definida';
            const diferencial = document.getElementById('diagnosticoDiferencial').value || '';
            
            const exames = Array.from(document.querySelectorAll('#exames input:checked')).map(cb => cb.value);
            
            let conduta = `**CONDUTA TERAP√äUTICA**\n\n`;
            conduta += `Com base na hip√≥tese diagn√≥stica de "${hipotese}"`;
            if (diferencial) conduta += ` (diagn√≥stico diferencial: ${diferencial})`;
            conduta += `, recomenda-se:\n\n`;
            
            conduta += `1. **TRATAMENTO FARMACOL√ìGICO:**\n`;
            conduta += `   ‚Ä¢ Iniciar/ajustar medica√ß√£o conforme protocolos\n`;
            conduta += `   ‚Ä¢ Orientar sobre efeitos colaterais e ades√£o\n`;
            conduta += `   ‚Ä¢ Reavaliar em 2-4 semanas\n\n`;
            
            conduta += `2. **TRATAMENTO N√ÉO FARMACOL√ìGICO:**\n`;
            conduta += `   ‚Ä¢ Encaminhamento para psicoterapia\n`;
            conduta += `   ‚Ä¢ Orientar sobre higiene do sono\n`;
            conduta += `   ‚Ä¢ Atividade f√≠sica regular\n`;
            conduta += `   ‚Ä¢ Psicoeduca√ß√£o\n\n`;
            
            conduta += `3. **EXAMES COMPLEMENTARES:**\n`;
            if (exames.length > 0) {
                exames.forEach(exame => conduta += `   ‚Ä¢ Solicitar ${exame}\n`);
            } else {
                conduta += `   ‚Ä¢ Nenhum exame solicitado no momento\n`;
            }
            
            conduta += `\n4. **RETORNO:**\n`;
            conduta += `   ‚Ä¢ Agendar retorno em 30 dias\n`;
            conduta += `   ‚Ä¢ Retornar antes se piora ou idea√ß√£o suicida`;
            
            const condutaDisplay = document.getElementById('condutaGerada');
            condutaDisplay.style.display = 'block';
            condutaDisplay.innerHTML = conduta.replace(/\n/g, '<br>');
        }

        // Fun√ß√£o para gerar relat√≥rio completo
        function gerarRelatorioCompleto() {
            let relatorio = '';
            
            // Identifica√ß√£o
            const idade = document.getElementById('idade').value || 'N√£o informada';
            const sexo = document.getElementById('sexo').value || 'N√£o informado';
            const peso = document.getElementById('peso').value || 'N√£o informado';
            const altura = document.getElementById('altura').value || 'N√£o informado';
            
            relatorio += `**IDENTIFICA√á√ÉO**\n`;
            relatorio += `Idade: ${idade} | Sexo: ${sexo}\n`;
            relatorio += `Peso: ${peso}kg | Altura: ${altura}m\n`;
            
            if (peso !== 'N√£o informado' && altura !== 'N√£o informado' && !isNaN(peso) && !isNaN(altura) && peso > 0 && altura > 0) {
                const imc = (parseFloat(peso) / (parseFloat(altura) * parseFloat(altura))).toFixed(2);
                const classificacao = classificarIMC(parseFloat(imc));
                relatorio += `IMC: ${imc} kg/m¬≤ (${classificacao})\n`;
            }
            relatorio += `\n`;
            
            // Queixa Principal
            const queixa = document.getElementById('queixa').value || 'N√£o informada';
            relatorio += `**QUEIXA PRINCIPAL**\n${queixa}\n\n`;
            
            // Antecedentes
            relatorio += `**ANTECEDENTES**\n`;
            const pessoais = Array.from(document.querySelectorAll('#antecedentesPessoais input:checked')).map(cb => cb.value);
            relatorio += `Pessoais: ${pessoais.length > 0 ? pessoais.join(', ') : 'Nenhum informado'}\n`;
            
            const familiares = Array.from(document.querySelectorAll('#antecedentesFamiliares input:checked')).map(cb => cb.value);
            relatorio += `Familiares: ${familiares.length > 0 ? familiares.join(', ') : 'Nenhum informado'}\n`;
            
            const alergias = document.getElementById('alergias').value;
            if (alergias) relatorio += `Alergias: ${alergias}\n`;
            relatorio += `\n`;
            
            // HDA
            const hdaDisplay = document.getElementById('hdaGerada');
            if (hdaDisplay.style.display !== 'none' && hdaDisplay.innerHTML) {
                relatorio += `**HIST√ìRIA DA DOEN√áA ATUAL**\n`;
                relatorio += hdaDisplay.innerText + '\n\n';
            }
            
            // Medicamentos
            relatorio += `**MEDICAMENTOS EM USO**\n`;
            const medicamentos = document.querySelectorAll('#medicamentos-container .medicamento-item');
            
            if (medicamentos.length > 0) {
                medicamentos.forEach((med, index) => {
                    const inputs = med.querySelectorAll('input');
                    const nome = inputs[0]?.value || 'N√£o informado';
                    const dose = inputs[1]?.value || '';
                    const tempo = inputs[2]?.value || '';
                    const indicacao = inputs[3]?.value || '';
                    const resposta = inputs[4]?.value || '';
                    
                    relatorio += `${index+1}. ${nome}`;
                    if (dose) relatorio += ` - ${dose}`;
                    if (tempo) relatorio += ` (${tempo})`;
                    if (indicacao) relatorio += ` - Indica√ß√£o: ${indicacao}`;
                    if (resposta) relatorio += ` - Resposta: ${resposta}`;
                    relatorio += `\n`;
                });
            } else {
                relatorio += `Nenhum medicamento informado\n`;
            }
            relatorio += `\n`;
            
            // Hip√≥teses e Conduta
            const hipotese = document.getElementById('hipotesePrincipal').value;
            if (hipotese) {
                relatorio += `**HIP√ìTESE DIAGN√ìSTICA**\n${hipotese}\n\n`;
            }
            
            const condutaDisplay = document.getElementById('condutaGerada');
            if (condutaDisplay.style.display !== 'none' && condutaDisplay.innerHTML) {
                relatorio += `**CONDUTA**\n`;
                relatorio += condutaDisplay.innerText;
            }
            
            const relatorioDiv = document.getElementById('relatorioCompleto');
            relatorioDiv.style.display = 'block';
            document.getElementById('conteudoRelatorio').innerHTML = relatorio.replace(/\n/g, '<br>');
        }

        function copiarTexto() {
            const relatorioDiv = document.getElementById('relatorioCompleto');
            if (relatorioDiv.style.display === 'none') {
                alert('Gere o relat√≥rio completo primeiro!');
                return;
            }
            
            const texto = document.getElementById('conteudoRelatorio').innerText;
            navigator.clipboard.writeText(texto).then(() => {
                alert('Relat√≥rio copiado para a √°rea de transfer√™ncia!');
            }).catch(() => {
                alert('Erro ao copiar texto. Selecione e copie manualmente.');
            });
        }

        function limparFormulario() {
            if (confirm('Tem certeza que deseja limpar todos os dados?')) {
                location.reload();
            }
        }

        // Adicionar primeiro medicamento ao carregar
        window.onload = function() {
            adicionarMedicamento();
        };
    </script>
</body>
                    </html>
