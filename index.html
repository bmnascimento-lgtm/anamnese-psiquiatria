<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o Geri√°trica Ampla (AGA) - Sistema Especialista</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f4f8;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #1e3c5c;
            margin-bottom: 25px;
            font-size: 2.2em;
            border-bottom: 4px solid #3498db;
            padding-bottom: 10px;
        }

        h2 {
            color: #2c5282;
            margin: 25px 0 15px 0;
            font-size: 1.5em;
            background: #e8f0fe;
            padding: 10px;
            border-radius: 8px;
        }

        h3 {
            color: #2d3748;
            margin: 15px 0 10px 0;
            font-size: 1.2em;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid #3498db;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2d3748;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.1);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 200px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .btn-info {
            background: #f39c12;
        }

        .btn-info:hover {
            background: #e67e22;
        }

        .result-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e2e8f0;
        }

        .meem-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 6px solid #9b59b6;
        }

        .meem-valor {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .meem-classificacao {
            font-size: 20px;
            padding: 10px;
            border-radius: 8px;
            display: inline-block;
            min-width: 250px;
            text-align: center;
        }

        .meem-normal { background: #c8e6c9; color: #1b5e20; }
        .meem-leve { background: #fff9c4; color: #ff6f00; }
        .meem-moderado { background: #ffcc80; color: #e65100; }
        .meem-grave { background: #ffcdd2; color: #b71c1c; }

        .medicamento-item {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            position: relative;
        }

        .btn-remover {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .btn-remover:hover {
            background: #c0392b;
        }

        .sugestoes-perguntas {
            background: #ebf5ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .sugestao-item {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .sugestao-item:before {
            content: "‚Ä¢";
            color: #3498db;
            font-weight: bold;
            position: absolute;
            left: 5px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìã Avalia√ß√£o Geri√°trica Ampla (AGA)</h1>
        <p style="margin-bottom: 20px; color: #4a5568;">Baseado nas diretrizes da Sociedade Brasileira de Geriatria e Gerontologia</p>

        <!-- Identifica√ß√£o -->
        <div class="card">
            <h2>1. Identifica√ß√£o do Paciente</h2>
            <div class="grid-4">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="nome" placeholder="Digite o nome do paciente">
                </div>
                <div class="form-group">
                    <label>Idade</label>
                    <input type="number" id="idade" min="0" max="120">
                </div>
                <div class="form-group">
                    <label>Sexo</label>
                    <select id="sexo">
                        <option value="">Selecione</option>
                        <option value="Feminino">Feminino</option>
                        <option value="Masculino">Masculino</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data da Avalia√ß√£o</label>
                    <input type="date" id="dataAvaliacao" value="2026-02-18">
                </div>
            </div>
        </div>

        <!-- MEEM -->
        <div class="card">
            <h2>2. Mini Exame do Estado Mental (MEEM)</h2>
            
            <div class="grid-3">
                <div class="form-group">
                    <label>Orienta√ß√£o Temporal (0-5)</label>
                    <input type="number" id="meemTempo" min="0" max="5" step="1" oninput="calcularMEEM()">
                </div>
                <div class="form-group">
                    <label>Orienta√ß√£o Espacial (0-5)</label>
                    <input type="number" id="meemEspaco" min="0" max="5" step="1" oninput="calcularMEEM()">
                </div>
                <div class="form-group">
                    <label>Registro (0-3)</label>
                    <input type="number" id="meemRegistro" min="0" max="3" step="1" oninput="calcularMEEM()">
                </div>
                <div class="form-group">
                    <label>Aten√ß√£o e C√°lculo (0-5)</label>
                    <input type="number" id="meemAtencao" min="0" max="5" step="1" oninput="calcularMEEM()">
                </div>
                <div class="form-group">
                    <label>Mem√≥ria de Evoca√ß√£o (0-3)</label>
                    <input type="number" id="meemMemoria" min="0" max="3" step="1" oninput="calcularMEEM()">
                </div>
                <div class="form-group">
                    <label>Linguagem (0-9)</label>
                    <input type="number" id="meemLinguagem" min="0" max="9" step="1" oninput="calcularMEEM()">
                </div>
            </div>

            <!-- Resultado MEEM com classifica√ß√£o autom√°tica -->
            <div id="meemContainer" class="meem-container" style="display: none;">
                <div id="meemValor" class="meem-valor"></div>
                <div id="meemClassificacao" class="meem-classificacao"></div>
            </div>
        </div>

        <!-- Medicamentos -->
        <div class="card">
            <h2>3. Medicamentos em Uso</h2>
            <div id="medicamentos-container">
                <!-- Os medicamentos ser√£o adicionados aqui dinamicamente -->
            </div>
            <button class="btn" onclick="adicionarMedicamento()">+ Adicionar Medicamento</button>
        </div>

        <!-- Antecedentes com perguntas sugestivas -->
        <div class="card">
            <h2>4. Antecedentes Pessoais e Familiares</h2>
            
            <!-- Sugest√µes de perguntas -->
            <div class="sugestoes-perguntas">
                <h3 style="margin-top: 0; color: #2980b9;">üí° Perguntas sugeridas para anamnese:</h3>
                <div class="grid-2">
                    <div>
                        <div class="sugestao-item">Quedas nos √∫ltimos 12 meses?</div>
                        <div class="sugestao-item">Perda de peso n√£o intencional?</div>
                        <div class="sugestao-item">Dificuldade para realizar AIVDs (compras, finan√ßas)?</div>
                        <div class="sugestao-item">Incontin√™ncia urin√°ria ou fecal?</div>
                        <div class="sugestao-item">Sintomas depressivos (tristeza, anedonia)?</div>
                    </div>
                    <div>
                        <div class="sugestao-item">Hist√≥rico de dem√™ncia na fam√≠lia?</div>
                        <div class="sugestao-item">Doen√ßas cardiovasculares (IAM, AVC)?</div>
                        <div class="sugestao-item">Osteoporose ou fraturas pr√©vias?</div>
                        <div class="sugestao-item">Diabetes ou hipertens√£o?</div>
                        <div class="sugestao-item">Tabagismo ou etilismo?</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div>
                    <h3>Antecedentes Pessoais</h3>
                    <div class="checkbox-group" id="antecedentesPessoais">
                        <div class="checkbox-item"><input type="checkbox" value="HAS"> HAS</div>
                        <div class="checkbox-item"><input type="checkbox" value="DM"> Diabetes Mellitus</div>
                        <div class="checkbox-item"><input type="checkbox" value="Dislipidemia"> Dislipidemia</div>
                        <div class="checkbox-item"><input type="checkbox" value="IAM"> Infarto Agudo do Mioc√°rdio</div>
                        <div class="checkbox-item"><input type="checkbox" value="AVC"> AVC</div>
                        <div class="checkbox-item"><input type="checkbox" value="ICC"> Insufici√™ncia Card√≠aca</div>
                        <div class="checkbox-item"><input type="checkbox" value="FA"> Fibrila√ß√£o Atrial</div>
                        <div class="checkbox-item"><input type="checkbox" value="DPOC"> DPOC</div>
                        <div class="checkbox-item"><input type="checkbox" value="Osteoporose"> Osteoporose</div>
                        <div class="checkbox-item"><input type="checkbox" value="Hipotireoidismo"> Hipotireoidismo</div>
                        <div class="checkbox-item"><input type="checkbox" value="Parkinson"> Doen√ßa de Parkinson</div>
                        <div class="checkbox-item"><input type="checkbox" value="Dem√™ncia"> Dem√™ncia</div>
                        <div class="checkbox-item"><input type="checkbox" value="Depress√£o"> Depress√£o</div>
                        <div class="checkbox-item"><input type="checkbox" value="Quedas"> Quedas frequentes</div>
                        <div class="checkbox-item"><input type="checkbox" value="Incontin√™ncia urin√°ria"> Incontin√™ncia urin√°ria</div>
                        <div class="checkbox-item"><input type="checkbox" value="Incontin√™ncia fecal"> Incontin√™ncia fecal</div>
                    </div>
                </div>
                
                <div>
                    <h3>Antecedentes Familiares</h3>
                    <div class="checkbox-group" id="antecedentesFamiliares">
                        <div class="checkbox-item"><input type="checkbox" value="HAS familiar"> HAS</div>
                        <div class="checkbox-item"><input type="checkbox" value="DM familiar"> Diabetes</div>
                        <div class="checkbox-item"><input type="checkbox" value="IAM familiar"> Infarto</div>
                        <div class="checkbox-item"><input type="checkbox" value="AVC familiar"> AVC</div>
                        <div class="checkbox-item"><input type="checkbox" value="Dem√™ncia familiar"> Dem√™ncia/Alzheimer</div>
                        <div class="checkbox-item"><input type="checkbox" value="Parkinson familiar"> Parkinson</div>
                        <div class="checkbox-item"><input type="checkbox" value="Osteoporose familiar"> Osteoporose</div>
                        <div class="checkbox-item"><input type="checkbox" value="Neoplasias"> Neoplasias</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Terapias -->
        <div class="card">
            <h2>5. Terapias em Realiza√ß√£o</h2>
            
            <div class="grid-3">
                <div class="form-group">
                    <label>Fisioterapia</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="fisioterapia" value="sim" onchange="toggleTerapiaCampos('fisio')"> Sim
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="fisioterapia" value="nao" onchange="toggleTerapiaCampos('fisio')" checked> N√£o
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Fonoaudiologia</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="fono" value="sim" onchange="toggleTerapiaCampos('fono')"> Sim
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="fono" value="nao" onchange="toggleTerapiaCampos('fono')" checked> N√£o
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Terapia Ocupacional</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="to" value="sim" onchange="toggleTerapiaCampos('to')"> Sim
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="to" value="nao" onchange="toggleTerapiaCampos('to')" checked> N√£o
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campos para Sim (aparecem apenas quando selecionado Sim) -->
            <div id="camposFisio" style="display: none;" class="grid-2">
                <div class="form-group">
                    <label>Onde realiza fisioterapia?</label>
                    <input type="text" placeholder="Ex: Cl√≠nica X, Domic√≠lio, UBS...">
                </div>
                <div class="form-group">
                    <label>Desde quando?</label>
                    <input type="text" placeholder="Ex: 3 meses, desde 2024...">
                </div>
            </div>

            <div id="camposFono" style="display: none;" class="grid-2">
                <div class="form-group">
                    <label>Onde realiza fonoaudiologia?</label>
                    <input type="text" placeholder="Ex: Cl√≠nica X, Domic√≠lio, UBS...">
                </div>
                <div class="form-group">
                    <label>Desde quando?</label>
                    <input type="text" placeholder="Ex: 3 meses, desde 2024...">
                </div>
            </div>

            <div id="camposTO" style="display: none;" class="grid-2">
                <div class="form-group">
                    <label>Onde realiza terapia ocupacional?</label>
                    <input type="text" placeholder="Ex: Cl√≠nica X, Domic√≠lio, UBS...">
                </div>
                <div class="form-group">
                    <label>Desde quando?</label>
                    <input type="text" placeholder="Ex: 3 meses, desde 2024...">
                </div>
            </div>
        </div>

        <!-- Bot√µes Finais -->
        <div style="display: flex; gap: 10px; margin: 30px 0; flex-wrap: wrap;">
            <button class="btn btn-success" onclick="gerarRelatorio()">üìã Gerar Relat√≥rio Completo</button>
            <button class="btn" onclick="copiarTexto()">üìã Copiar Relat√≥rio</button>
            <button class="btn" onclick="limparFormulario()">üîÑ Nova Avalia√ß√£o</button>
        </div>

        <!-- Relat√≥rio Completo -->
        <div class="result-box" id="relatorioCompleto" style="display:none;">
            <h3>üìÑ RELAT√ìRIO DA AVALIA√á√ÉO GERI√ÅTRICA AMPLA</h3>
            <div id="conteudoRelatorio" style="white-space: pre-wrap; line-height: 1.6;"></div>
        </div>
        
        <footer>
            Baseado nas diretrizes da Sociedade Brasileira de Geriatria e Gerontologia
        </footer>
    </div>

    <script>
        // Fun√ß√µes para MEEM
        function calcularMEEM() {
            const tempo = parseInt(document.getElementById('meemTempo').value) || 0;
            const espaco = parseInt(document.getElementById('meemEspaco').value) || 0;
            const registro = parseInt(document.getElementById('meemRegistro').value) || 0;
            const atencao = parseInt(document.getElementById('meemAtencao').value) || 0;
            const memoria = parseInt(document.getElementById('meemMemoria').value) || 0;
            const linguagem = parseInt(document.getElementById('meemLinguagem').value) || 0;
            
            const total = tempo + espaco + registro + atencao + memoria + linguagem;
            
            const meemContainer = document.getElementById('meemContainer');
            const meemValor = document.getElementById('meemValor');
            const meemClassificacao = document.getElementById('meemClassificacao');
            
            if (total > 0) {
                meemContainer.style.display = 'block';
                meemValor.innerHTML = `MEEM: ${total}/30`;
                
                const classificacao = classificarMEEM(total);
                meemClassificacao.innerHTML = classificacao.texto;
                meemClassificacao.className = `meem-classificacao ${classificacao.classe}`;
            } else {
                meemContainer.style.display = 'none';
            }
        }

        function classificarMEEM(pontuacao) {
            const escolaridade = prompt("Qual a escolaridade do paciente? (analfabeto, baixa, m√©dia, alta)", "m√©dia");
            
            let resultado = { texto: "", classe: "" };
            
            if (escolaridade.toLowerCase() === "analfabeto") {
                if (pontuacao <= 18) resultado = { texto: "Prov√°vel decl√≠nio cognitivo", classe: "meem-moderado" };
                else if (pontuacao <= 22) resultado = { texto: "Poss√≠vel decl√≠nio cognitivo", classe: "meem-leve" };
                else resultado = { texto: "Sem decl√≠nio cognitivo", classe: "meem-normal" };
            } else if (escolaridade.toLowerCase() === "baixa") {
                if (pontuacao <= 20) resultado = { texto: "Prov√°vel decl√≠nio cognitivo", classe: "meem-moderado" };
                else if (pontuacao <= 24) resultado = { texto: "Poss√≠vel decl√≠nio cognitivo", classe: "meem-leve" };
                else resultado = { texto: "Sem decl√≠nio cognitivo", classe: "meem-normal" };
            } else if (escolaridade.toLowerCase() === "m√©dia") {
                if (pontuacao <= 22) resultado = { texto: "Prov√°vel decl√≠nio cognitivo", classe: "meem-moderado" };
                else if (pontuacao <= 26) resultado = { texto: "Poss√≠vel decl√≠nio cognitivo", classe: "meem-leve" };
                else resultado = { texto: "Sem decl√≠nio cognitivo", classe: "meem-normal" };
            } else {
                if (pontuacao <= 24) resultado = { texto: "Prov√°vel decl√≠nio cognitivo", classe: "meem-moderado" };
                else if (pontuacao <= 28) resultado = { texto: "Poss√≠vel decl√≠nio cognitivo", classe: "meem-leve" };
                else resultado = { texto: "Sem decl√≠nio cognitivo", classe: "meem-normal" };
            }
            
            return resultado;
        }

        // Fun√ß√µes para Medicamentos
        let contadorMedicamentos = 1;

        function adicionarMedicamento() {
            const container = document.getElementById('medicamentos-container');
            const novoMed = document.createElement('div');
            novoMed.className = 'medicamento-item';
            novoMed.id = `med-${contadorMedicamentos}`;
            
            novoMed.innerHTML = `
                <button class="btn-remover" onclick="removerMedicamento('med-${contadorMedicamentos}')">‚úï Remover</button>
                <div class="grid-3">
                    <div class="form-group">
                        <label>Medicamento</label>
                        <input type="text" placeholder="Nome do medicamento">
                    </div>
                    <div class="form-group">
                        <label>Dose</label>
                        <input type="text" placeholder="Ex: 50mg">
                    </div>
                    <div class="form-group">
                        <label>Posologia</label>
                        <input type="text" placeholder="Ex: 1x/dia, 8/8h">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label>Data de in√≠cio</label>
                        <input type="text" placeholder="Ex: 01/01/2026">
                    </div>
                    <div class="form-group">
                        <label>Indica√ß√£o</label>
                        <input type="text" placeholder="Ex: HAS, DM...">
                    </div>
                </div>
            `;
            
            container.appendChild(novoMed);
            contadorMedicamentos++;
        }

        function removerMedicamento(id) {
            const elemento = document.getElementById(id);
            if (elemento) {
                elemento.remove();
            }
        }

        // Fun√ß√µes para Terapias
        function toggleTerapiaCampos(tipo) {
            const radios = document.getElementsByName(tipo === 'fisio' ? 'fisioterapia' : 
                                                     tipo === 'fono' ? 'fono' : 'to');
            let valor = '';
            
            for (const radio of radios) {
                if (radio.checked) {
                    valor = radio.value;
                    break;
                }
            }
            
            const camposId = tipo === 'fisio' ? 'camposFisio' : 
                             tipo === 'fono' ? 'camposFono' : 'camposTO';
            
            document.getElementById(camposId).style.display = valor === 'sim' ? 'grid' : 'none';
        }

        // Fun√ß√µes para relat√≥rio
        function gerarRelatorio() {
            let relatorio = '';
            
            // Identifica√ß√£o
            const nome = document.getElementById('nome').value || 'N√£o informado';
            const idade = document.getElementById('idade').value || 'N√£o informada';
            const sexo = document.getElementById('sexo').value || 'N√£o informado';
            const data = document.getElementById('dataAvaliacao').value || new Date().toLocaleDateString();
            
            relatorio += `**IDENTIFICA√á√ÉO**\n`;
            relatorio += `Nome: ${nome}\n`;
            relatorio += `Idade: ${idade} anos | Sexo: ${sexo}\n`;
            relatorio += `Data da avalia√ß√£o: ${data}\n\n`;
            
            // MEEM
            const meemValor = document.getElementById('meemValor')?.innerText;
            const meemClassificacao = document.getElementById('meemClassificacao')?.innerText;
            
            if (meemValor) {
                relatorio += `**MINI EXAME DO ESTADO MENTAL**\n`;
                relatorio += `${meemValor}\n`;
                if (meemClassificacao) relatorio += `Classifica√ß√£o: ${meemClassificacao}\n\n`;
            }
            
            // Medicamentos
            relatorio += `**MEDICAMENTOS EM USO**\n`;
            const medicamentos = document.querySelectorAll('#medicamentos-container .medicamento-item');
            
            if (medicamentos.length > 0) {
                medicamentos.forEach((med, index) => {
                    const inputs = med.querySelectorAll('input');
                    const nome = inputs[0]?.value || 'N√£o informado';
                    const dose = inputs[1]?.value || '';
                    const posologia = inputs[2]?.value || '';
                    const inicio = inputs[3]?.value || '';
                    const indicacao = inputs[4]?.value || '';
                    
                    relatorio += `${index+1}. ${nome}`;
                    if (dose) relatorio += ` - ${dose}`;
                    if (posologia) relatorio += ` (${posologia})`;
                    if (inicio) relatorio += ` - In√≠cio: ${inicio}`;
                    if (indicacao) relatorio += ` - Indica√ß√£o: ${indicacao}`;
                    relatorio += `\n`;
                });
            } else {
                relatorio += `Nenhum medicamento informado\n`;
            }
            relatorio += `\n`;
            
            // Antecedentes
            relatorio += `**ANTECEDENTES**\n`;
            
            const pessoais = Array.from(document.querySelectorAll('#antecedentesPessoais input:checked')).map(cb => cb.value);
            if (pessoais.length > 0) {
                relatorio += `Pessoais: ${pessoais.join(', ')}\n`;
            } else {
                relatorio += `Pessoais: Nenhum informado\n`;
            }
            
            const familiares = Array.from(document.querySelectorAll('#antecedentesFamiliares input:checked')).map(cb => cb.value);
            if (familiares.length > 0) {
                relatorio += `Familiares: ${familiares.join(', ')}\n`;
            } else {
                relatorio += `Familiares: Nenhum informado\n`;
            }
            relatorio += `\n`;
            
            // Terapias
            relatorio += `**TERAPIAS EM REALIZA√á√ÉO**\n`;
            
            const fisioSim = document.querySelector('input[name="fisioterapia"][value="sim"]')?.checked;
            if (fisioSim) {
                const onde = document.querySelector('#camposFisio input:first-child')?.value || 'n√£o informado';
                const desde = document.querySelector('#camposFisio input:last-child')?.value || 'n√£o informado';
                relatorio += `Fisioterapia: Sim (${onde}, ${desde})\n`;
            } else {
                relatorio += `Fisioterapia: N√£o\n`;
            }
            
            const fonoSim = document.querySelector('input[name="fono"][value="sim"]')?.checked;
            if (fonoSim) {
                const onde = document.querySelector('#camposFono input:first-child')?.value || 'n√£o informado';
                const desde = document.querySelector('#camposFono input:last-child')?.value || 'n√£o informado';
                relatorio += `Fonoaudiologia: Sim (${onde}, ${desde})\n`;
            } else {
                relatorio += `Fonoaudiologia: N√£o\n`;
            }
            
            const toSim = document.querySelector('input[name="to"][value="sim"]')?.checked;
            if (toSim) {
                const onde = document.querySelector('#camposTO input:first-child')?.value || 'n√£o informado';
                const desde = document.querySelector('#camposTO input:last-child')?.value || 'n√£o informado';
                relatorio += `Terapia Ocupacional: Sim (${onde}, ${desde})\n`;
            } else {
                relatorio += `Terapia Ocupacional: N√£o\n`;
            }
            
            const relatorioDiv = document.getElementById('relatorioCompleto');
            relatorioDiv.style.display = 'block';
            document.getElementById('conteudoRelatorio').innerHTML = relatorio.replace(/\n/g, '<br>');
        }

        function copiarTexto() {
            const relatorioDiv = document.getElementById('relatorioCompleto');
            if (relatorioDiv.style.display === 'none') {
                alert('Gere o relat√≥rio completo primeiro!');
                return;
            }
            
            const texto = document.getElementById('conteudoRelatorio').innerText;
            navigator.clipboard.writeText(texto).then(() => {
                alert('Relat√≥rio copiado para a √°rea de transfer√™ncia!');
            }).catch(() => {
                alert('Erro ao copiar texto. Selecione e copie manualmente.');
            });
        }

        function limparFormulario() {
            if (confirm('Tem certeza que deseja limpar todos os dados?')) {
                location.reload();
            }
        }

        // Adicionar primeiro medicamento ao carregar
        window.onload = function() {
            adicionarMedicamento();
        };
    </script>
</body>
    </html>
